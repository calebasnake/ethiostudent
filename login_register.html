<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Login/Register - Ethio Student</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background-color: #f0f2f5; }
.auth-container {
  max-width: 450px;
  margin: 80px auto;
  padding: 30px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}
.switch-btn { cursor:pointer; color:blue; text-decoration:underline; }
.google-btn { background-color:#dd4b39; color:white; }
</style>
</head>
<body>

<div class="auth-container">
  <h3 class="text-center mb-4" id="form-title">Login</h3>

  <!-- Google Login (demo only) -->
  <div class="d-grid mb-3">
    <button class="btn google-btn" onclick="alert('Google login demo only')">Login with Google</button>
  </div>

  <!-- Username/Password Form -->
  <form id="authForm">
    <div class="mb-3">
      <label for="username" class="form-label">Student Name</label>
      <input type="text" id="username" class="form-control" placeholder="Enter your name" required>
    </div>

    <div class="mb-3" id="password-container">
      <label for="password" class="form-label">Password</label>
      <input type="password" id="password" class="form-control" placeholder="Enter password" required>
    </div>

    <button type="submit" class="btn btn-primary w-100" id="submitBtn">Login</button>
  </form>

  <p class="text-center mt-3">
    <span id="switchText">Don't have an account?</span>
    <span class="switch-btn" id="switchBtn">Register</span>
  </p>

  <div id="message" class="mt-2 text-center"></div>
</div>

<script>
// Demo users stored in localStorage for persistence
let users = JSON.parse(localStorage.getItem('users')) || [
  {name:'student1', password:'12345'},
  {name:'student2', password:'abcde'}
];

let isLogin = true;

const formTitle = document.getElementById('form-title');
const submitBtn = document.getElementById('submitBtn');
const switchBtn = document.getElementById('switchBtn');
const switchText = document.getElementById('switchText');
const messageDiv = document.getElementById('message');

switchBtn.addEventListener('click', ()=>{
  isLogin = !isLogin;
  if(isLogin){
    formTitle.textContent = 'Login';
    submitBtn.textContent = 'Login';
    switchText.textContent = "Don't have an account?";
    switchBtn.textContent = "Register";
  }else{
    formTitle.textContent = 'Register';
    submitBtn.textContent = 'Register';
    switchText.textContent = "Already have an account?";
    switchBtn.textContent = "Login";
  }
  messageDiv.textContent = '';
});

document.getElementById('authForm').addEventListener('submit', function(e){
  e.preventDefault();
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value.trim();

  if(isLogin){
    const user = users.find(u=> u.name===username && u.password===password);
    if(user){
      // Login successful â†’ save login status
      localStorage.setItem('isLoggedIn', 'true');
      localStorage.setItem('username', username);
      localStorage.setItem('users', JSON.stringify(users));

      messageDiv.style.color = 'green';
      messageDiv.textContent = 'Login successful! Redirecting...';
      setTimeout(()=>window.location.href='education_level.html', 1000);
    }else{
      messageDiv.style.color='red';
      messageDiv.textContent = 'Invalid name or password';
    }
  }else{
    const exists = users.find(u=> u.name===username);
    if(exists){
      messageDiv.style.color='red';
      messageDiv.textContent = 'User already exists';
    }else{
      // Save new user
      users.push({name:username, password:password});
      localStorage.setItem('users', JSON.stringify(users));

      messageDiv.style.color='green';
      messageDiv.textContent = 'Registration successful! You can now login.';
      setTimeout(()=>{switchBtn.click()}, 1000);
    }
  }
});
</script>

</body>
</html>
